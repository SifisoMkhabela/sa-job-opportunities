<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Post a Job - SA Job Opportunities</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body class="bg-light">
  <div class="container py-5">
    <h2 class="mb-4">Post a New Job</h2>
    <form id="jobForm" class="bg-white p-4 rounded shadow-sm">
      <div class="mb-3">
        <label for="title" class="form-label">Job Title</label>
        <input type="text" class="form-control" id="title" required />
      </div>
      <div class="mb-3">
        <label for="company" class="form-label">Company</label>
        <input type="text" class="form-control" id="company" required />
      </div>
      <div class="mb-3">
        <label for="type" class="form-label">Job Type</label>
        <input type="text" class="form-control" id="type" placeholder="e.g., Full-time, Internship" required />
      </div>
      <div class="mb-3">
        <label for="category" class="form-label">Category</label>
        <input type="text" class="form-control" id="category" required />
      </div>
      <div class="mb-3">
        <label for="location" class="form-label">Location</label>
        <input type="text" class="form-control" id="location" required />
      </div>
      <div class="mb-3">
        <label for="deadline" class="form-label">Deadline</label>
        <input type="date" class="form-control" id="deadline" required />
      </div>
      <div class="mb-3">
        <label for="link" class="form-label">Apply Link</label>
        <input type="url" class="form-control" id="link" required />
      </div>
      <button type="submit" class="btn btn-primary">Post Job</button>
      <div id="status" class="mt-3"></div>
    </form>
  </div>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCexm1PTk0cst8i3NJxh8MJvqvgm0ys84A",
      authDomain: "sa-job-opportunities.firebaseapp.com",
      projectId: "sa-job-opportunities",
      storageBucket: "sa-job-opportunities.appspot.com",
      messagingSenderId: "1055979762474",
      appId: "1:1055979762474:web:54ea80e0f1e2e339793f5a",
      measurementId: "G-T1Z3MRRX2H"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Handle form submission
    document.getElementById('jobForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      const status = document.getElementById('status');
      status.textContent = 'Submitting...';

      const jobData = {
        title: document.getElementById('title').value.trim(),
        company: document.getElementById('company').value.trim(),
        type: document.getElementById('type').value.trim(),
        category: document.getElementById('category').value.trim(),
        location: document.getElementById('location').value.trim(),
        deadline: firebase.firestore.Timestamp.fromDate(new Date(document.getElementById('deadline').value)),
        link: document.getElementById('link').value.trim(),
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      };

      try {
        await db.collection('jobs').add(jobData);
        status.innerHTML = `<span class="text-success">Job posted successfully!</span>`;
        document.getElementById('jobForm').reset();
      } catch (err) {
        console.error(err);
        status.innerHTML = `<span class="text-danger">Error posting job.</span>`;
      }
    });
  </script>
</body>
</html>
