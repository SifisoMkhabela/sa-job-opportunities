<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SA Job Opportunities - Find Your Dream Job</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="index.html">SA Job Opportunities</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="navbarNav" class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="jobs.html">Jobs</a></li>
          <li class="nav-item"><a class="nav-link" href="company.html">Companies</a></li>
          <li class="nav-item"><a class="nav-link" href="courses.html">Courses</a></li>
          <li class="nav-item"><a class="nav-link" href="career-advice.html">Career Advice</a></li>
          <li class="nav-item"><a class="nav-link" href="post-job.html">Post a Job</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <header class="bg-black text-white py-5">
    <div class="container text-center">
      <h1>Find your dream career</h1>
      <p><strong>8,111</strong> Jobs in South Africa</p>
      <form id="search-form" class="row g-2 justify-content-center" onsubmit="event.preventDefault(); loadJobs();">
        <div class="col-md-4">
          <input type="text" class="form-control" id="search-keyword" placeholder="Job Title, Skill or Company" />
        </div>
        <div class="col-md-3">
          <input type="text" class="form-control" id="search-location" placeholder="Location" />
        </div>
        <div class="col-md-2">
          <button type="submit" class="btn btn-primary w-100">Search</button>
        </div>
      </form>
    </div>
  </header>

  <main class="container my-5">
    <section>
      <h2>Browse Jobs by Region</h2>
      <ul class="list-inline browse-list">
        <li class="list-inline-item">Gauteng Jobs (3425)</li>
        <li class="list-inline-item">Western Cape Jobs (3224)</li>
        <li class="list-inline-item">Kwazulu Natal Jobs (1075)</li>
        <li class="list-inline-item">Eastern Cape Jobs (609)</li>
        <li class="list-inline-item">Mpumalanga Jobs (756)</li>
        <li class="list-inline-item">Northern Cape Jobs (487)</li>
        <li class="list-inline-item">Free State Jobs (569)</li>
        <li class="list-inline-item">North West Jobs (512)</li>
        <li class="list-inline-item">Limpopo Jobs (582)</li>
      </ul>
    </section>

    <section class="mt-5">
      <h2>Browse Jobs by City</h2>
      <ul class="list-inline browse-list">
        <li class="list-inline-item">Johannesburg Jobs (1740)</li>
        <li class="list-inline-item">Cape Town Jobs (1225)</li>
        <li class="list-inline-item">Pretoria Jobs (1078)</li>
        <li class="list-inline-item">Durban Jobs (698)</li>
        <li class="list-inline-item">Port Elizabeth Jobs (453)</li>
        <li class="list-inline-item">East London Jobs (449)</li>
        <li class="list-inline-item">Nelspruit Jobs (494)</li>
        <li class="list-inline-item">Bloemfontein Jobs (486)</li>
        <li class="list-inline-item">Pietermaritzburg Jobs (449)</li>
      </ul>
    </section>

    <section class="mt-5">
      <h2>Browse Jobs by Sector</h2>
      <ul class="list-inline browse-list">
        <li class="list-inline-item">IT Jobs (882)</li>
        <li class="list-inline-item">Finance Jobs (838)</li>
        <li class="list-inline-item">Sales Jobs (1355)</li>
        <li class="list-inline-item">Engineering Jobs (1090)</li>
        <li class="list-inline-item">Manufacturing Jobs (955)</li>
        <li class="list-inline-item">General Jobs (1091)</li>
        <li class="list-inline-item">Accounting Jobs (487)</li>
        <li class="list-inline-item">Insurance Jobs (740)</li>
        <li class="list-inline-item">Admin Jobs (471)</li>
      </ul>
    </section>

    <!-- Job listings section -->
    <section class="mt-5" id="job-listings-section">
      <h2>Latest Job Listings</h2>
      <div id="job-listings" class="row gy-4">
        <!-- Jobs will be dynamically inserted here -->
      </div>
    </section>

    <section class="mt-5 companies-hiring">
      <h2>Companies Hiring Now</h2>
      <button class="btn btn-outline-primary">View All</button>
    </section>

    <section class="mt-5 mobile-app p-4 bg-light rounded">
      <h2>Never miss a job opportunity</h2>
      <p>Get SA Job Opportunities on your phone</p>
      <ul>
        <li>Access 1000s of jobs, on the go</li>
        <li>Filtering to find the jobs that suit you</li>
        <li>Apply directly and in real time</li>
      </ul>
    </section>

    <section class="about mt-5">
      <h2>About SA Job Opportunities</h2>
      <p>
        SA Job Opportunities is a leading South African job portal that helps jobseekers from all sectors and experience levels find and apply for vacancies from top companies across the country.
        We aim to be the destination where every candidate finds their ideal job and every employer finds the perfect candidate.
      </p>
    </section>
  </main>

  <footer class="bg-dark text-white py-4 mt-5">
    <div class="container d-flex flex-wrap justify-content-between">
      <div>
        <h5>Company</h5>
        <ul class="list-unstyled">
          <li><a href="#" class="text-white">Work For Us</a></li>
          <li><a href="#" class="text-white">Advertise With Us</a></li>
        </ul>
      </div>
      <div>
        <h5>Quick Links</h5>
        <ul class="list-unstyled">
          <li><a href="#" class="text-white">Recruiters Directory</a></li>
          <li><a href="#" class="text-white">Site Map</a></li>
          <li><a href="#" class="text-white">Site Terms and Privacy Policy</a></li>
          <li><a href="#" class="text-white">Widgets</a></li>
          <li><a href="#" class="text-white">Recruiter Terms</a></li>
          <li><a href="#" class="text-white">FAQ</a></li>
        </ul>
      </div>
      <div>
        <h5>Partner Sites</h5>
        <ul class="list-unstyled">
          <li><a href="#" class="text-white">Simplify.hr</a></li>
          <li><a href="#" class="text-white">News24</a></li>
          <li><a href="#" class="text-white">Property24</a></li>
          <li><a href="#" class="text-white">Media24</a></li>
        </ul>
      </div>
    </div>
    <div class="text-center mt-3">&copy; 2025 SA Job Opportunities. All rights reserved.</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Your Firebase config here - replace with your actual config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function renderJob(job) {
      return `
        <div class="col-md-6 col-lg-4">
          <div class="card h-100 shadow-sm">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">${job.title || 'No Title'}</h5>
              <h6 class="card-subtitle mb-2 text-muted">${job.company || 'Unknown Company'}</h6>
              <p class="card-text mb-2"><strong>Type:</strong> ${job.type || '-'}</p>
              <p class="card-text mb-2"><strong>Category:</strong> ${job.category || '-'}</p>
              <p class="card-text mb-2"><strong>Experience:</strong> ${job.experience || '-'}</p>
              <p class="card-text mb-2"><strong>Deadline:</strong> ${job.deadline || '-'}</p>
              <a href="${job.link || '#'}" target="_blank" class="btn btn-primary mt-auto">Apply Now</a>
            </div>
          </div>
        </div>
      `;
    }

    function loadJobs() {
      const keyword = document.getElementById('search-keyword').value.toLowerCase();
      const location = document.getElementById('search-location').value.toLowerCase();
      const jobsContainer = document.getElementById('job-listings');
      jobsContainer.innerHTML = '<p>Loading jobs...</p>';

      db.collection('jobs')
        .get()
        .then((querySnapshot) => {
          if (querySnapshot.empty) {
            jobsContainer.innerHTML = '<p>No jobs found.</p>';
            return;
          }

          let jobsHTML = '';
          querySnapshot.forEach(doc => {
            const job = doc.data();
            // Simple keyword and location filter
            const matchesKeyword = !keyword || (
              (job.title && job.title.toLowerCase().includes(keyword)) ||
              (job.company && job.company.toLowerCase().includes(keyword)) ||
              (job.category && job.category.toLowerCase().includes(keyword))
            );
            const matchesLocation = !location || (
              (job.location && job.location.toLowerCase().includes(location))
            );

            if (matchesKeyword && matchesLocation) {
              jobsHTML += renderJob(job);
            }
          });

          if (jobsHTML === '') {
            jobsContainer.innerHTML = '<p>No matching jobs found.</p>';
          } else {
            jobsContainer.innerHTML = jobsHTML;
          }
        })
        .catch(error => {
          console.error("Error fetching jobs:", error);
          jobsContainer.innerHTML = '<p>Failed to load jobs. Please try again later.</p>';
        });
    }

    window.addEventListener('DOMContentLoaded', loadJobs);
  </script>
</body>
</html>
